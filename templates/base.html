<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link
      rel="stylesheet"
      href="{{url_for('static', filename = 'style.css')}}"
    />
  </head>
  <body>
    <nav>
      <div style="display: flex; align-items: center">
        <a href="{{ url_for('hello_world') }}" class="nav-logo">
          <img
            src="{{ url_for('static', filename='LOGO.png.jpeg') }}"
            alt="StockWise Logo"
          />
        </a>
      </div>
      <div class="hamburger" id="hamburgerMenu">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="links" id="navLinks">
        <a href="{{ url_for('hello_world') }}">Home</a>
        <a href="{{ url_for('app_page') }}">App</a>
        {% if session.get('user') %}
        <a href="{{ url_for('account') }}">Account</a>
        <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
        <a href="{{ url_for('signup') }}">Sign up</a>
        {% endif %}
      </div>
    </nav>
    <main>{%block content%} {% endblock %}</main>
    <footer>
      <div class="pages">
        <p>Pages</p>
        <a href="{{ url_for('hello_world') }}">Home</a>
        <a href="{{ url_for('app_page') }}">App</a>
        <a href="{{ url_for('app_page') }}">About</a>
      </div>
      <!-- <p class="footer_logo">StockWise</p> -->
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const hamburger = document.getElementById("hamburgerMenu");
        const navLinks = document.getElementById("navLinks");
        hamburger &&
          hamburger.addEventListener("click", function () {
            navLinks.classList.toggle("show");
            hamburger.classList.toggle("active");
          });
        // Hide menu on link click (mobile)
        navLinks &&
          navLinks.querySelectorAll("a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 800) {
                navLinks.classList.remove("show");
                hamburger.classList.remove("active");
              }
            });
          });
        const params = new URLSearchParams(
          window.location.hash.replace("#", "?"),
        );
        const modalBg = document.getElementById("confirmModal");
        const modalMsg = document.getElementById("confirmModalMsg");
        if (params.get("type") === "signup" && params.get("token")) {
          modalMsg.textContent =
            "Your email has been confirmed! You can now log in.";
          modalBg.style.display = "flex";
        } else if (params.get("error_code") === "otp_expired") {
          modalMsg.textContent =
            "Your email confirmation link is invalid or has expired. Please request a new one.";
          modalBg.style.display = "flex";
        } else if (params.get("error_code")) {
          modalMsg.textContent =
            "Error: " + (params.get("error_description") || "Unknown error.");
          modalBg.style.display = "flex";
        }
      });
    </script>
  </body>
</html>
